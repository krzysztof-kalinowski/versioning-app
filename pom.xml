<?xml version="1.0" encoding="UTF-8"?>

<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
  <modelVersion>4.0.0</modelVersion>

  <groupId>kkalinowski.versioning.demo</groupId>
  <artifactId>versioning-app</artifactId>
  <version>0.2.3-SNAPSHOT</version>

  <name>versioning-app</name>

  <properties>
	  <maven.compiler.target>1.8</maven.compiler.target>
	  <maven.compiler.source>1.8</maven.compiler.source>
	  <encoding>UTF-8</encoding>
	  <project.build.sourceEncoding>${encoding}</project.build.sourceEncoding>
	  <project.reporting.outputEncoding>${encoding}</project.reporting.outputEncoding>
	  <project.resources.sourceEncoding>${encoding}</project.resources.sourceEncoding>
	  <archetype.encoding>${encoding}</archetype.encoding>
  </properties>
  
  <scm>
      <connection>scm:git:git@github.com:krzysztof-kalinowski/versioning-app.git</connection>
      <developerConnection>scm:git:git@github.com:krzysztof-kalinowski/versioning-app.git</developerConnection>
      <url>https://github.com/krzysztof-kalinowski/versioning-app</url>
      <tag>@{project.version}</tag>
  </scm>


  <build>
        <plugins>
            <plugin>
                <artifactId>maven-assembly-plugin</artifactId>
                <version>3.2.0</version>
                <configuration>
                    <archive>
                        <manifest>
                            <addDefaultImplementationEntries>true</addDefaultImplementationEntries>
                            <addDefaultSpecificationEntries>true</addDefaultSpecificationEntries>
                            <mainClass>kkalinowski.versioning.demo.App</mainClass>
                        </manifest>
                    </archive>
                    <descriptorRefs>
                        <descriptorRef>jar-with-dependencies</descriptorRef>
                    </descriptorRefs>
                </configuration>
                <executions>
                    <execution>
                        <phase>package</phase>
                        <goals>
                            <goal>single</goal>
                        </goals>
                    </execution>
                </executions>
            </plugin>
            <plugin>
	            <groupId>external.atlassian.jgitflow</groupId>
	            <artifactId>jgitflow-maven-plugin</artifactId>
	            <version>1.0-m5.1</version>
	            <configuration>
	                <!-- see goals wiki page for configuration options -->
	                <flowInitContext>
				         <masterBranchName>master</masterBranchName>
				         <developBranchName>develop</developBranchName>
				         <featureBranchPrefix>feature-</featureBranchPrefix>
				         <releaseBranchPrefix>release-</releaseBranchPrefix>
				         <hotfixBranchPrefix>hotfix-</hotfixBranchPrefix>
				         <versionTagPrefix>kk-</versionTagPrefix>
				    </flowInitContext>
				    <enableSshAgent>false</enableSshAgent>
				    <autoVersionSubmodules>true</autoVersionSubmodules>
				    <pushFeatures>true</pushFeatures>
				    <pushReleases>true</pushReleases>
				    <pushHotfixes>true</pushHotfixes>
				    <noDeploy>true</noDeploy>
				    <!-- <allowSnapshots>false</allowSnapshots>-->
				    <!-- <allowSnapshots>true</allowSnapshots> -->
				    <!-- <allowUntracked>false</allowUntracked> -->
				    <!-- <defaultOriginUrl></defaultOriginUrl> -->
				    <!-- <enableFeatureVersions>true</enableFeatureVersions> -->
				    <!-- <featureName></featureName> -->
				    <!-- <pushFeatures>false</pushFeatures>
				    <pushHotfixes>false</pushHotfixes>
				    <pushReleases>false</pushReleases>
				    <scmCommentPrefix>default</scmCommentPrefix> -->
				    <!-- <startCommit></startCommit> -->
	            </configuration>
	           <!--  <executions>
	            	<execution>
	            		<id>feature-start</id>
	            		<goals>
	            			<goal>feature-start</goal>
	            		</goals>
	            		<configuration>
	            			<allowSnapshots>true</allowSnapshots>
						    <allowUntracked>false</allowUntracked>
						    <enableSshAgent>false</enableSshAgent>
						    <pushFeatures>true</pushFeatures>
						    <scmCommentPrefix>fs</scmCommentPrefix>
	            		</configuration>
	            	</execution>
	            	<execution>
	            		<id>feature-finish</id>
	            		<goals>
	            			<goal>feature-finish</goal>
	            		</goals>
	            		<configuration>
	            			<allowSnapshots>true</allowSnapshots>
						    <allowUntracked>false</allowUntracked>
						    <enableSshAgent>false</enableSshAgent>
						    <pushFeatures>true</pushFeatures>
						    <scmCommentPrefix>ff</scmCommentPrefix>
	            		</configuration>
	            	</execution>
	            </executions> -->
	        </plugin>
            <!-- <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-release-plugin</artifactId>
                <version>3.0.0-M1</version>
                <configuration>
                    <goals>pre-integration-test</goals>
                    <preparationGoals>package</preparationGoals>
                    <allowTimestampedSnapshots>true</allowTimestampedSnapshots>
                    <tagNameFormat>@{project.version}</tagNameFormat>
                    <remoteTagging>false</remoteTagging> default:true Do you want to create remote tag before building and pushing?
                </configuration>
            </plugin> -->
            
        </plugins>
    </build>
</project>
